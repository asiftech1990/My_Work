- name: Install Apache and Docker
  hosts: all
  become: yes

  tasks:
    - name: Install and start Apache
      block:
        - name: Install Apache
          apt:
            name: apache2
            state: present
            update_cache: yes
        - name: Start and enable Apache
          service:
            name: apache2
            state: started
            enabled: yes

    - name: Install and start Docker
      block:
        - name: Install Docker
          apt:
            name: docker.io
            state: present
            update_cache: yes
        - name: Start and enable Docker service
          service:
            name: docker
            state: started
            enabled: yes
